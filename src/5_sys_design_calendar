Web Calendar ‚Äì Senior Frontend System Design (Sticky Notes)

---

## 1Ô∏è‚É£ Index / Agenda (One-liner Each)

1. **Problem Definition** ‚Äì Interactive calendar for events
2. **Core Views** ‚Äì Month, Week, Day, Agenda
3. **Data Model** ‚Äì Events, instances, recurrences
4. **Time & Timezone** ‚Äì Correct local rendering
5. **Layout Algorithm** ‚Äì Overlapping events
6. **Rendering Strategy** ‚Äì Grid + virtualization
7. **Interaction Model** ‚Äì Drag, resize, select
8. **Optimistic Updates** ‚Äì Instant UX
9. **Conflict Handling** ‚Äì Concurrent edits
10. **Recurrence Rules** ‚Äì RRULE expansion
11. **Performance** ‚Äì Large calendars
12. **Scrolling Model** ‚Äì Sticky headers
13. **Accessibility** ‚Äì Keyboard + screen readers
14. **Offline & Sync** ‚Äì Reliability
15. **Failure Scenarios** ‚Äì Recovery
16. **Trade-offs** ‚Äì Design decisions
17. **End Summary** ‚Äì Why this scales

---

## 2Ô∏è‚É£ Frontend Architecture (Draw This)

```
                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                 ‚îÇ   Calendar UI      ‚îÇ
                 ‚îÇ (Month/Week/Day)   ‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ        View Layout Engine            ‚îÇ
        ‚îÇ Grid | Overlap Resolver | Position  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ            Calendar Store            ‚îÇ
        ‚îÇ Events | Instances | Selection       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ               ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Interaction Ctrl ‚îÇ ‚îÇ Sync Mgr ‚îÇ ‚îÇ Timezone Ctrl ‚îÇ
‚îÇ Drag / Resize    ‚îÇ ‚îÇ REST/WS  ‚îÇ ‚îÇ Local ‚Üî UTC   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ RAF Loop ‚îÇ     ‚îÇ Backend API ‚îÇ
     ‚îÇ Rendering‚îÇ     ‚îÇ Events      ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3Ô∏è‚É£ Interview Hints (Say These)

* Calendar is **layout-heavy**, not data-heavy
* Correctness > animations
* Timezone bugs are **P0 issues**
* Overlapping layout is the hardest part
* Rendering must scale to **thousands of events**
* Drag/resize must be **pixel-accurate**
* Optimistic updates are expected

---

## 4Ô∏è‚É£ Sticky Notes (Topic-wise)

---

### 1. Problem Definition

**1-liner**
A calendar UI that displays, creates, and edits time-based events accurately across views, timezones, and devices.

---

### 2. Core Views

* Month ‚Üí date grid
* Week ‚Üí time grid (7 columns)
* Day ‚Üí single column
* Agenda ‚Üí list view

Each view = different layout strategy.

---

### 3. Data Model

**Event (Source of Truth)**

```
{
  id,
  title,
  startUTC,
  endUTC,
  timezone,
  recurrenceRule
}
```

**Derived Instance**

* Expanded per view
* Cached per date range

---

### 4. Time & Timezone Handling (CRITICAL)

Rules:

* Store everything in UTC
* Convert to local for rendering
* DST aware

```
Backend ‚Üí UTC
Frontend ‚Üí Local TZ
```

Never store UI time as source of truth.

---

### 5. Layout Algorithm (Overlapping Events)

**Problem**

* Multiple events overlap in same time slot

**Solution**

* Sweep line algorithm
* Assign columns dynamically

```
Events sorted by start time
‚Üí detect overlap
‚Üí split width
```

---

### 6. Rendering Strategy

* CSS Grid for time slots
* Absolute positioning for events
* Virtualize rows for long days

Why:

* Predictable layout
* Fast reflow

---

### 7. Interaction Model

Supported:

* Click to create
* Drag to move
* Resize to extend
* Multi-select

Handled via:

* Pointer events
* Ghost elements during drag

---

### 8. Optimistic Updates

Flow:

```
User creates event
‚Üí Render immediately
‚Üí API call
‚Üí Success ‚Üí confirm
‚Üí Failure ‚Üí revert
```

States:

* pending
* saved
* error

---

### 9. Conflict Handling

Scenario:

* Same event edited on two devices

Strategy:

* Versioning
* Last-write-wins + notify
* Optional soft warning

---

### üîü Recurrence Rules (RRULE)

Examples:

* Daily
* Weekly
* Monthly

Frontend:

* Expands only visible range
* Avoid infinite expansion

---

### 1Ô∏è‚É£1Ô∏è‚É£ Performance Optimizations

* Windowed rendering
* Memoized layout
* RAF batching
* Avoid full reflows

---

### 1Ô∏è‚É£2Ô∏è‚É£ Scrolling Model

* Sticky time column
* Sticky day headers
* Preserve scroll on updates

---

### 1Ô∏è‚É£3Ô∏è‚É£ Accessibility (Senior Signal)

* Keyboard navigation
* ARIA roles
* Screen reader labels

Calendar is **not mouse-only**.

---

### 1Ô∏è‚É£4Ô∏è‚É£ Offline & Sync

* Cache events locally
* Queue edits
* Sync when online

---

### 1Ô∏è‚É£5Ô∏è‚É£ Failure Scenarios

| Failure     | Handling         |
| ----------- | ---------------- |
| API failure | Retry / rollback |
| TZ mismatch | Recompute layout |
| Large data  | Pagination       |

---

## 5Ô∏è‚É£ Trade-offs (Explicit)

| Decision          | Pros          | Cons          |
| ----------------- | ------------- | ------------- |
| CSS Grid          | Simple layout | Less flexible |
| Absolute pos      | Precise       | Manual math   |
| Optimistic UI     | Fast UX       | Revert logic  |
| Client recurrence | Responsive    | CPU cost      |
| Server recurrence | Consistent    | Latency       |

---

## 6Ô∏è‚É£ Ending Statement (Memorize)

**‚ÄúThis calendar design separates event data from layout computation, handles timezones safely, resolves overlaps deterministically, and delivers instant interactions through optimistic updates and virtualized rendering.‚Äù**

---

If you want next:

* **Overlap algorithm dry-run**
* **Drag & resize math**
* **React component breakdown**
* **Google Calendar-style edge cases**

Just say üëç
